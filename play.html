<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>剪贴板音频一键播放（支持谷歌TTS）</title>
    <style>
        body {font-family: system-ui,Arial,sans-serif; display: flex; justify-content: center; align-items: center; min-height: 100vh; margin:0; background: linear-gradient(135deg,#74b9ff,#0984e3); color:#fff;}
        .box {text-align:center; padding:40px; background:rgba(255,255,255,0.15); border-radius:20px; backdrop-filter:blur(10px);}
        button {margin-top:20px; padding:16px 40px; font-size:18px; background:#ff3838; border:none; border-radius:50px; color:#fff; cursor:pointer;}
        button:hover {background:#ff4d4d; transform:scale(1.05);}
        audio {margin-top:30px; width:380px; max-width:90vw;}
        .msg {margin-top:20px; padding:10px; background:rgba(0,0,0,0.3); border-radius:10px; min-height:20px;}
    </style>
</head>
<body>
<div class="box">
    <h1>剪贴板音频一键播放</h1>
    <p>支持普通音频 + 谷歌翻译 TTS</p>
    <button id="play">播放剪贴板音频</button>
    <audio id="audio" controls></audio>
    <div class="msg" id="msg"></div>
</div>

<script>
const btn = document.getElementById('play');
const audio = document.getElementById('audio');
const msg = document.getElementById('msg');

// 免费公共 CORS 代理（2025年还能用，挑一个快的）
const proxies = [
    'https://corsproxy.io/?',           // 推荐第1个
    'https://api.allorigins.win/raw/?',  // 第2个备用
    'https://cors-anywhere.temporary.site/' // 第3个备用
];

btn.onclick = async () => {
    try {
        let url = (await navigator.clipboard.readText()).trim();
        if (!url) return show('剪贴板为空');

        // 如果是谷歌翻译的链接，强制走代理
        if (url.includes('translate.google') || url.includes('translate_tts')) {
            for (let proxy of proxies) {
                try {
                    const proxyUrl = proxy + encodeURIComponent(url);
                    audio.src = proxyUrl;
                    audio.play();
                    show(`谷歌TTS播放中（代理：${proxy.split('/')[2]}）<br>${url.substring(0,60)}...`, 'green');
                    return;
                } catch (e) { continue; }
            }
            show('所有代理都失败了，谷歌可能又升级了反爬', 'red');
            return;
        }

        // 普通链接直接播
        audio.src = url;
        audio.play();
        show('正在播放<br>' + url, 'green');

    } catch (e) {
        show('失败：' + e.message, 'red');
    }
};

function show(text, color='white') {
    msg.innerHTML = text;
    msg.style.color = color;
    setTimeout(()=>msg.innerHTML='', 8000);
}
</script>
</body>
</html>